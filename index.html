<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AOC++ Medieval War Simulator</title>

<style>
body{margin:0;font-family:Arial;background:#020617;color:#e5e7eb}
.top{background:#020617;padding:6px;display:flex;gap:6px;flex-wrap:wrap;font-size:13px}
.top span{background:#1e293b;padding:4px 6px;border-radius:6px}
button{background:#2563eb;color:#fff;border:none;padding:8px;border-radius:6px}
.panel{display:none;padding:8px}
.active{display:block}

/* MAP */
.map-container{
position:relative;
width:100%;
height:70vh;
background:#0f172a;
border-top:2px solid #1e293b;
}
.kingdom{
position:absolute;
background:#16a34a;
color:#000;
padding:4px 6px;
border-radius:6px;
font-size:11px;
}
.enemy{background:#dc2626;color:#fff}
.menu{
position:fixed;
bottom:0;
width:100%;
background:#020617;
display:flex;
justify-content:space-around;
}
</style>
</head>

<body>

<!-- TOP BAR -->
<div class="top">
<span>ğŸ’° <b id="gold"></b></span>
<span>ğŸ <b id="food"></b></span>
<span>ğŸ‘¥ <b id="pop"></b></span>
<span>âš” <b id="army"></b></span>
<span>ğŸ˜Š <b id="stab"></b>%</span>
<span>ğŸ“… <b id="year"></b></span>
</div>

<!-- HOME -->
<div id="home" class="panel active">
<h2>ğŸŒ Medieval World</h2>
<button onclick="openMap()">OPEN WORLD MAP</button>
</div>

<!-- MAP -->
<div id="mapPanel" class="panel">
<div class="map-container" id="map"></div>
</div>

<!-- INFO -->
<div id="info" class="panel"></div>

<div class="menu">
<button onclick="open('home')">Home</button>
<button onclick="open('mapPanel')">Map</button>
<button onclick="endTurn()">End Turn</button>
</div>

<script>
let game={
gold:600,food:500,pop:1600,army:500,stab:70,year:1400,
generals:1
};

let kingdoms=[
{name:"England",x:30,y:25,army:400,owner:true},
{name:"France",x:35,y:35,army:450,owner:false},
{name:"Holy Roman Empire",x:45,y:30,army:500,owner:false},
{name:"Castile",x:30,y:45,army:350,owner:false},
{name:"Ottoman Empire",x:55,y:40,army:600,owner:false},
{name:"Mamluk Sultanate",x:60,y:55,army:500,owner:false},
{name:"Timurid Empire",x:70,y:45,army:650,owner:false},
{name:"Ming China",x:85,y:35,army:800,owner:false},
{name:"Delhi Sultanate",x:75,y:55,army:600,owner:false}
];

function open(id){
document.querySelectorAll(".panel").forEach(p=>p.classList.remove("active"));
document.getElementById(id).classList.add("active");
}

function openMap(){
open("mapPanel");
renderMap();
}

function render(){
gold.innerText=game.gold;
food.innerText=game.food;
pop.innerText=game.pop;
army.innerText=game.army;
stab.innerText=game.stab;
year.innerText=game.year;
}

function renderMap(){
const map=document.getElementById("map");
map.innerHTML="";
kingdoms.forEach((k,i)=>{
let d=document.createElement("div");
d.className="kingdom "+(k.owner?"":"enemy");
d.style.left=k.x+"%";
d.style.top=k.y+"%";
d.innerText=k.name;
d.onclick=()=>openInfo(i);
map.appendChild(d);
});
}

function openInfo(i){
let k=kingdoms[i];
open("info");
info.innerHTML=`
<h3>${k.name}</h3>
<p>Army: ${k.army}</p>
<p>Status: ${k.owner?"Your Kingdom":"Enemy"}</p>
${!k.owner?`<button onclick="attack(${i})">âš” Attack</button>`:""}
<button onclick="open('mapPanel')">Back</button>
`;
}

function attack(i){
let enemy=kingdoms[i];
let myPower=game.army + game.generals*100 + game.stab;
if(myPower>enemy.army){
enemy.owner=true;
game.gold+=120;
game.stab+=3;
}else{
game.army-=150;
game.stab-=5;
}
openMap();
render();
}

function endTurn(){
game.year++;
game.food+=60;
game.pop+=Math.floor(game.pop*(game.stab/200));
render();
}

render();
</script>

</body>
</html>
